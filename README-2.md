# ğŸ“‹ 2025-07-12 å¤šé é¢æ¶æ§‹æ•´åˆé–‹ç™¼è¨ˆåŠƒ

## ğŸ” **ç¾ç‹€å•é¡Œç¸½çµ**

### 1. **é™„åŠ å¡ç‰‡æ’åºå•é¡Œ**
#### å•é¡Œæè¿°
- TESTç‰ˆæœ¬èˆ‡æ­£å¼ç‰ˆæœ¬çš„é™„åŠ å¡ç‰‡æ’åºæ©Ÿåˆ¶ä¸ä¸€è‡´
- ç”¨æˆ¶ç·¨è¼¯å¾Œçš„å¡ç‰‡é †åºç„¡æ³•æ­£ç¢ºå„²å­˜å’Œé‚„åŸ
- æ‹–æ‹‰æ’åºåŠŸèƒ½èˆ‡è³‡æ–™åº«å„²å­˜çš„é †åºä¸åŒæ­¥

#### ä¿®æ­£æ–¹æ¡ˆ
```javascript
// ç›®å‰çš„æ’åºç³»çµ±æ¶æ§‹
const allCardsSortable = [
  { type: 'main', id: 'main', flex_json: {...}, img: '...' },
  { type: 'promo', id: 'promo1', flex_json: {...}, img: '...' },
  { type: 'promo', id: 'promo2', flex_json: {...}, img: '...' }
];

// å„²å­˜æ™‚çš„card_orderé™£åˆ—
const card_order = allCardsSortable.map(c => c.id); // ['main', 'promo1', 'promo2']

// è¼‰å…¥æ™‚é‡å»ºæ’åº
card_order.forEach(cardId => {
  if (cardId === 'main') {
    // é‡å»ºä¸»å¡ç‰‡
  } else {
    // å¾promoCardListæ‰¾åˆ°å°æ‡‰çš„å®£å‚³å¡ç‰‡ä¸¦é‡å»º
  }
});
```

#### å…·é«”ä¿®æ­£é»
1. **çµ±ä¸€æ’åºé‚è¼¯**ï¼šç¢ºä¿TESTç‰ˆæœ¬å’Œæ­£å¼ç‰ˆæœ¬ä½¿ç”¨ç›¸åŒçš„`card_order`è™•ç†æ©Ÿåˆ¶
2. **åŒæ­¥å•é¡Œä¿®æ­£**ï¼šæ‹–æ‹‰æ’åºå¾Œç«‹å³æ›´æ–°`allCardsSortable`å’Œè³‡æ–™åº«
3. **è¼‰å…¥é †åºä¿®æ­£**ï¼šå…ˆè¼‰å…¥å®£å‚³å¡ç‰‡åˆ—è¡¨ï¼Œå†æ ¹æ“š`card_order`é‡å»ºç”¨æˆ¶çš„æ’åº

### 2. **ç¨‹å¼ç¢¼è‚¥å¤§å•é¡Œ**
- **mcard-mtest.js**: 5000+ è¡Œï¼ˆä¸»è¦å•é¡Œï¼‰
- **é‡è¤‡ç¨‹å¼ç¢¼**: 60-70%åŠŸèƒ½é‡è¤‡
- **ç¶­è­·å›°é›£**: å–®æª”æ¡ˆéå¤§ï¼Œé›£ä»¥å®šä½ä¿®æ”¹

### 3. **åˆ†äº«åŠŸèƒ½å•é¡Œ**
- **Facebook/EMAILåˆ†äº«é é¢å®Œå…¨ç©ºç™½**
- **Instagramåˆ†äº«åŠŸèƒ½ç„¡æ³•é‹ä½œ**
- **åƒæ•¸å‚³éå¤±æ•—**ï¼šä¸­æ–‡å­—ç¬¦ç·¨ç¢¼å•é¡Œ

## ğŸ—ï¸ **ä¸€é å¼é›»å­å ±ç·¨è¼¯å™¨è©³ç´°è¨­è¨ˆ**

### 1. **çµ±ä¸€ç·¨è¼¯å™¨æ¦‚å¿µ**
```
ğŸ“ ä¸€é å¼é›»å­å ±ç·¨è¼¯å™¨ (Universal Newsletter Editor)
â”œâ”€â”€ ğŸ“„ ä¸»å…§å®¹å€åŸŸ (Master Content)
â”‚   â”œâ”€â”€ æ¨™é¡Œç·¨è¼¯
â”‚   â”œâ”€â”€ å‰¯æ¨™é¡Œç·¨è¼¯
â”‚   â”œâ”€â”€ ä¸»åœ–ç‰‡ä¸Šå‚³
â”‚   â”œâ”€â”€ é¡è‰²ä¸»é¡Œè¨­å®š
â”‚   â””â”€â”€ æœƒå“¡è³‡è¨Šå€å¡Š
â”œâ”€â”€ ğŸ“ é™„åŠ å¡ç‰‡ç®¡ç† (Slave Cards)
â”‚   â”œâ”€â”€ å®£å‚³å¡ç‰‡é¸æ“‡
â”‚   â”œâ”€â”€ æ´»å‹•å¡ç‰‡æ’å…¥
â”‚   â”œâ”€â”€ å¡ç‰‡æ’åºæ‹–æ‹‰
â”‚   â””â”€â”€ å¡ç‰‡é è¦½
â””â”€â”€ ğŸ‘ï¸ å³æ™‚é è¦½ (Live Preview)
    â”œâ”€â”€ æ¡Œé¢ç‰ˆé è¦½
    â”œâ”€â”€ æ‰‹æ©Ÿç‰ˆé è¦½
    â””â”€â”€ åˆ†äº«æ ¼å¼é è¦½
```

### 2. **ç·¨è¼¯å™¨æ ¸å¿ƒåŠŸèƒ½**
```javascript
// çµ±ä¸€ç·¨è¼¯å™¨é¡åˆ¥
class UniversalNewsletterEditor {
  constructor() {
    this.masterContent = new MasterContentManager();
    this.slaveCards = new SlaveCardsManager();
    this.livePreview = new LivePreviewManager();
    this.shareManager = new ShareManager();
  }
  
  // å³æ™‚ç·¨è¼¯åŠŸèƒ½
  setupRealTimeEditing() {
    // æ–‡å­—å³æ™‚ç·¨è¼¯
    this.bindTextInputs();
    
    // é¡è‰²å³æ™‚èª¿æ•´
    this.bindColorPickers();
    
    // åœ–ç‰‡å³æ™‚ä¸Šå‚³å’Œé è¦½
    this.bindImageUploads();
    
    // å½±ç‰‡é€£çµå³æ™‚åµŒå…¥
    this.bindVideoLinks();
  }
  
  // ä¸»å¾æ¶æ§‹ç®¡ç†
  setupMasterSlaveArchitecture() {
    // ä¸»æ¨¡æ¿ç®¡ç†
    this.masterTemplate = {
      header: { title: '', subtitle: '', image: '' },
      content: { text: '', links: [], media: [] },
      footer: { contact: '', buttons: [] }
    };
    
    // å¾å±¬å¡ç‰‡ç®¡ç†
    this.slaveCards = {
      promo: [],      // å®£å‚³å¡ç‰‡
      event: [],      // æ´»å‹•å¡ç‰‡
      cta: [],        // è¡Œå‹•å‘¼ç±²å¡ç‰‡
      custom: []      // è‡ªè¨‚å¡ç‰‡
    };
  }
}
```

### 3. **åˆ†äº«å¹³å°çµ±ä¸€ä»‹é¢**
```javascript
// æ‰€æœ‰åˆ†äº«æ–¹å¼éƒ½ä½¿ç”¨ç›¸åŒçš„ç·¨è¼¯å™¨è³‡æ–™
class ShareManager {
  constructor(editorData) {
    this.editorData = editorData;
  }
  
  // LINEåˆ†äº« (2-1)
  async shareToLine() {
    // 1. æ•´åˆä¸»å¡ç‰‡å’Œé™„åŠ å¡ç‰‡
    const mainCard = this.generateMainCard(this.editorData);
    const promoCards = this.generatePromoCards(this.editorData.slaveCards);
    
    // 2. çµ„æˆcarousel
    const flexMessage = {
      type: 'flex',
      altText: this.editorData.title,
      contents: {
        type: 'carousel',
        contents: [mainCard, ...promoCards]
      }
    };
    
    // 3. ä½¿ç”¨LIFFåˆ†äº«
    await liff.init({ liffId: 'YOUR_LIFF_ID' });
    if (liff.isLoggedIn()) {
      await liff.shareTargetPicker([flexMessage]);
    }
  }
  
  // FBã€IGç­‰ç¤¾äº¤åª’é«”åˆ†äº« (2-2)
  async shareToSocial(platform) {
    // 1. ç”Ÿæˆé è¦½é é¢
    const previewUrl = await this.generatePreviewPage(this.editorData);
    
    // 2. ç”Ÿæˆé é¢æˆªåœ–
    const screenshot = await this.captureScreenshot(previewUrl);
    
    // 3. è¨­å®šOG metadata
    const ogData = {
      title: this.editorData.title,
      description: this.editorData.description,
      image: screenshot,
      url: previewUrl
    };
    
    // 4. æ ¹æ“šå¹³å°åˆ†äº«
    switch(platform) {
      case 'facebook':
        this.shareToFacebook(ogData);
        break;
      case 'instagram':
        this.shareToInstagram(screenshot);
        break;
      case 'email':
        this.shareToEmail(ogData);
        break;
    }
  }
}
```

### 4. **è³‡æ–™åº«æ•´åˆ**
```javascript
// è‡ªå‹•å„²å­˜æ©Ÿåˆ¶
class AutoSaveManager {
  constructor(editorData) {
    this.editorData = editorData;
    this.saveTimer = null;
    this.isDirty = false;
  }
  
  // ç›£è½ç·¨è¼¯è®ŠåŒ–
  watchChanges() {
    // é˜²æŠ–å‹•å„²å­˜ (1ç§’å¾Œå„²å­˜)
    this.saveTimer = setTimeout(() => {
      if (this.isDirty) {
        this.saveToDatabase();
        this.isDirty = false;
      }
    }, 1000);
  }
  
  // å„²å­˜åˆ°è³‡æ–™åº«
  async saveToDatabase() {
    const saveData = {
      page_id: this.editorData.pageId,
      line_user_id: this.editorData.userId,
      master_content: this.editorData.masterContent,
      slave_cards: this.editorData.slaveCards,
      card_order: this.editorData.cardOrder,
      flex_json: this.generateFlexJson(),
      updated_at: new Date().toISOString()
    };
    
    await fetch('/api/cards', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(saveData)
    });
  }
}
```

## ğŸ”§ **ç·¨ç¢¼æ–¹å¼æ”¹è®Šçš„æŠ€è¡“åŸå› **

### 3. **ç‚ºä»€éº¼è¦æ”¹è®Šç·¨ç¢¼æ–¹å¼ï¼Ÿ**

#### å•é¡ŒåŸå› 
```javascript
// ç¾è¡Œç·¨ç¢¼æ–¹å¼ (æœ‰å•é¡Œ)
const data = { title: "å°ç£ç¾é£Ÿå¡", name: "æå°è¯" };
const encoded = btoa(JSON.stringify(data)); // âŒ å¤±æ•—ï¼

// éŒ¯èª¤è¨Šæ¯ï¼š
// InvalidCharacterError: Failed to execute 'btoa' on 'Window': 
// The string to be encoded contains characters outside of the Latin1 range.
```

#### æŠ€è¡“åŸå› åˆ†æ
1. **btoa()å‡½æ•¸é™åˆ¶**ï¼š
   - åªæ”¯æ´ Latin1 å­—ç¬¦é›† (ISO-8859-1)
   - ä¸æ”¯æ´ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ“æ–‡ç­‰å¤šä½å…ƒçµ„å­—ç¬¦
   - ä¸­æ–‡å­—ç¬¦è¶…å‡º Latin1 ç¯„åœï¼Œå°è‡´ç·¨ç¢¼å¤±æ•—

2. **UTF-8ç·¨ç¢¼å•é¡Œ**ï¼š
   - ä¸­æ–‡å­—ç¬¦éœ€è¦ UTF-8 ç·¨ç¢¼
   - ç›´æ¥ä½¿ç”¨ btoa() ç„¡æ³•è™•ç† UTF-8 å­—ç¬¦
   - éœ€è¦å…ˆè½‰æ›ç‚º Latin1 ç›¸å®¹æ ¼å¼

#### è§£æ±ºæ–¹æ¡ˆ
```javascript
// æ–°ç·¨ç¢¼æ–¹å¼ (UTF-8å®‰å…¨)
function safeEncode(data) {
  const jsonString = JSON.stringify(data);
  // æ­¥é©Ÿ1: UTF-8 â†’ URLç·¨ç¢¼
  const urlEncoded = encodeURIComponent(jsonString);
  // æ­¥é©Ÿ2: URLç·¨ç¢¼ â†’ Latin1ç›¸å®¹
  const latin1Compatible = unescape(urlEncoded);
  // æ­¥é©Ÿ3: Latin1 â†’ Base64
  const base64Encoded = btoa(latin1Compatible);
  return base64Encoded;
}

function safeDecode(encodedData) {
  // æ­¥é©Ÿ1: Base64 â†’ Latin1
  const latin1String = atob(encodedData);
  // æ­¥é©Ÿ2: Latin1 â†’ URLç·¨ç¢¼
  const urlEncoded = escape(latin1String);
  // æ­¥é©Ÿ3: URLç·¨ç¢¼ â†’ UTF-8
  const utf8String = decodeURIComponent(urlEncoded);
  return JSON.parse(utf8String);
}
```

#### ç·¨ç¢¼æµç¨‹åœ–
```
ä¸­æ–‡è³‡æ–™ â†’ JSONå­—ä¸² â†’ UTF-8ç·¨ç¢¼ â†’ URLç·¨ç¢¼ â†’ Latin1ç›¸å®¹ â†’ Base64
   â†“                                                            â†“
 è§£ç¢¼å¾Œ â† JSONè§£æ â† UTF-8è§£ç¢¼ â† URLè§£ç¢¼ â† Latin1è½‰æ› â† Base64è§£ç¢¼
```

## ğŸ“Š **å¤šé é¢æ¶æ§‹é‡æ§‹è¨ˆåŠƒ**

### 1. **æ¨¡çµ„åŒ–æ¶æ§‹**
```
ğŸ“ public/js/modules/
â”œâ”€â”€ ğŸ” core/
â”‚   â”œâ”€â”€ auth-manager.js      (~300è¡Œ) - LINEèªè­‰ç®¡ç†
â”‚   â”œâ”€â”€ data-manager.js      (~400è¡Œ) - è³‡æ–™ç®¡ç†èˆ‡API
â”‚   â”œâ”€â”€ form-manager.js      (~350è¡Œ) - è¡¨å–®è™•ç†
â”‚   â””â”€â”€ utils.js            (~200è¡Œ) - é€šç”¨å·¥å…·å‡½æ•¸
â”œâ”€â”€ ğŸ“ editor/
â”‚   â”œâ”€â”€ editor-core.js       (~500è¡Œ) - ç·¨è¼¯å™¨æ ¸å¿ƒ
â”‚   â”œâ”€â”€ preview-renderer.js  (~400è¡Œ) - é è¦½æ¸²æŸ“
â”‚   â”œâ”€â”€ image-manager.js     (~300è¡Œ) - åœ–ç‰‡ç®¡ç†
â”‚   â””â”€â”€ template-manager.js  (~250è¡Œ) - æ¨¡æ¿ç®¡ç†
â”œâ”€â”€ ğŸ“¤ share/
â”‚   â”œâ”€â”€ share-core.js        (~400è¡Œ) - åˆ†äº«æ ¸å¿ƒé‚è¼¯
â”‚   â”œâ”€â”€ line-share.js        (~300è¡Œ) - LINEåˆ†äº«
â”‚   â”œâ”€â”€ social-share.js      (~350è¡Œ) - ç¤¾äº¤åª’é«”åˆ†äº«
â”‚   â””â”€â”€ email-share.js       (~200è¡Œ) - éƒµä»¶åˆ†äº«
â””â”€â”€ ğŸ¨ ui/
    â”œâ”€â”€ mobile-ui.js         (~400è¡Œ) - æ‰‹æ©Ÿç‰ˆUI
    â”œâ”€â”€ desktop-ui.js        (~300è¡Œ) - æ¡Œé¢ç‰ˆUI
    â””â”€â”€ responsive-ui.js     (~200è¡Œ) - éŸ¿æ‡‰å¼UI
```

### 2. **é é¢æ¶æ§‹**
```
ğŸ“ public/
â”œâ”€â”€ ğŸ  index.html                    - ä¸»å…¥å£
â”œâ”€â”€ ğŸ” line-auth-bridge.html         - LINEèªè­‰æ©‹æ¥
â”œâ”€â”€ ğŸ“ newsletter-editor.html        - ä¸€é å¼é›»å­å ±ç·¨è¼¯å™¨
â”œâ”€â”€ ğŸ“¤ share-control.html            - åˆ†äº«æ§åˆ¶ä¸­å¿ƒ
â””â”€â”€ ğŸ“‚ share/
    â”œâ”€â”€ line-share.html              - LINEåˆ†äº«
    â”œâ”€â”€ facebook-share.html          - Facebookåˆ†äº«
    â”œâ”€â”€ instagram-share.html         - Instagramåˆ†äº«
    â”œâ”€â”€ email-share.html             - Emailåˆ†äº«
    â””â”€â”€ universal-share.html         - é€šç”¨åˆ†äº«
```

### 3. **è¼‰å…¥ç­–ç•¥**
```javascript
// å‹•æ…‹æ¨¡çµ„è¼‰å…¥
class ModuleLoader {
  async loadEditorModules() {
    const [core, editor, ui] = await Promise.all([
      import('./modules/core/editor-core.js'),
      import('./modules/editor/preview-renderer.js'),
      import('./modules/ui/responsive-ui.js')
    ]);
    return { core, editor, ui };
  }
  
  async loadShareModules(platform) {
    const modules = await import(`./modules/share/${platform}-share.js`);
    return modules;
  }
}
```

## ğŸš€ **å¯¦ä½œè¨ˆåŠƒ**

### Phase 1: ç·Šæ€¥ä¿®å¾© (1å¤©)
- [x] åˆ†æé™„åŠ å¡ç‰‡æ’åºå•é¡Œ
- [ ] ä¿®æ­£TESTç‰ˆæœ¬æ’åºé‚è¼¯
- [ ] ä¿®æ­£åˆ†äº«åŠŸèƒ½ç·¨ç¢¼å•é¡Œ
- [ ] å¢å¼·éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### Phase 2: ç·¨è¼¯å™¨çµ±ä¸€ (2å¤©)
- [ ] å»ºç«‹ä¸€é å¼é›»å­å ±ç·¨è¼¯å™¨
- [ ] å¯¦ä½œä¸»å¾æ¶æ§‹è¨­è¨ˆ
- [ ] æ•´åˆå³æ™‚ç·¨è¼¯åŠŸèƒ½
- [ ] çµ±ä¸€åˆ†äº«ä»‹é¢

### Phase 3: æ¨¡çµ„åŒ–é‡æ§‹ (3å¤©)
- [ ] æ‹†åˆ†5000è¡Œç¨‹å¼ç¢¼
- [ ] å»ºç«‹æ ¸å¿ƒæ¨¡çµ„ç³»çµ±
- [ ] å¯¦ä½œå‹•æ…‹è¼‰å…¥æ©Ÿåˆ¶
- [ ] çµ±ä¸€èªè­‰å’Œè³‡æ–™ç®¡ç†

### Phase 4: åˆ†äº«ç³»çµ±å®Œå–„ (2å¤©)
- [ ] ä¿®æ­£Facebook/Emailåˆ†äº«å•é¡Œ
- [ ] å¯¦ä½œInstagramåˆ†äº«åŠŸèƒ½
- [ ] å»ºç«‹OGé€£çµç³»çµ±
- [ ] å®Œå–„é é¢æˆªåœ–åŠŸèƒ½

### Phase 5: æ¸¬è©¦èˆ‡å„ªåŒ– (1å¤©)
- [ ] å…¨é¢åŠŸèƒ½æ¸¬è©¦
- [ ] æ•ˆèƒ½å„ªåŒ–èª¿æ•´
- [ ] éŒ¯èª¤è™•ç†å®Œå–„
- [ ] æ–‡ä»¶æ›´æ–°

## ğŸ“ˆ **é æœŸæ•ˆæœ**

### 1. **æ•ˆèƒ½æå‡**
- åˆå§‹è¼‰å…¥æ™‚é–“ï¼š4-5ç§’ â†’ 0.5-1ç§’ (85%æ”¹å–„)
- ç¨‹å¼ç¢¼ç¶­è­·æ€§ï¼šæå‡80%
- åˆ†äº«æˆåŠŸç‡ï¼š0% â†’ 95%
- è¨˜æ†¶é«”ä½¿ç”¨ï¼šæ¸›å°‘60-70%

### 2. **é–‹ç™¼æ•ˆç‡**
- ç¨‹å¼ç¢¼é‡è¤‡ï¼š70% â†’ 10%
- æ–°åŠŸèƒ½é–‹ç™¼ï¼šåŠ é€Ÿ3-5å€
- éŒ¯èª¤å®šä½ï¼šåŠ é€Ÿ5-10å€
- ç¶­è­·æ™‚é–“ï¼šæ¸›å°‘80%

### 3. **ç”¨æˆ¶é«”é©—**
- ç·¨è¼¯éŸ¿æ‡‰é€Ÿåº¦ï¼š1-2ç§’ â†’ 0.1-0.3ç§’
- åˆ†äº«æµç¨‹é †æš¢åº¦ï¼šå¤§å¹…æ”¹å–„
- éŒ¯èª¤æç¤ºï¼šå¾ç„¡ â†’ å®Œæ•´
- å¤šå¹³å°ç›¸å®¹æ€§ï¼š95%+

## ğŸ¯ **æŠ€è¡“æ¶æ§‹ç¸½çµ**

### 1. **å¤šé é¢æ¶æ§‹å¿…è¦æ€§**
åŸºæ–¼LIFFæŠ€è¡“é™åˆ¶ï¼Œå¤šé é¢æ¶æ§‹æ˜¯å”¯ä¸€è§£æ±ºæ–¹æ¡ˆï¼š
- **èªè­‰é é¢**ï¼šä¸€æ¬¡æ€§å®ŒæˆLINEèªè­‰
- **ç·¨è¼¯å™¨é é¢**ï¼šå¿«é€Ÿè¼‰å…¥ï¼Œç„¡LIFFä¾è³´
- **åˆ†äº«é é¢**ï¼šå…·å‚™å®Œæ•´LIFFåŠŸèƒ½

### 2. **çµ±ä¸€ç·¨è¼¯å™¨å„ªå‹¢**
- æ‰€æœ‰åˆ†äº«æ–¹å¼ä½¿ç”¨ç›¸åŒç·¨è¼¯ä»‹é¢
- ä¸€æ¬¡ç·¨è¼¯ï¼Œå¤šå¹³å°åˆ†äº«
- ä¸»å¾æ¶æ§‹ï¼Œéˆæ´»æ“´å±•

### 3. **æ¨¡çµ„åŒ–è¨­è¨ˆåƒ¹å€¼**
- å–®ä¸€è·è²¬åŸå‰‡
- ç¨‹å¼ç¢¼é‡ç”¨ç‡æœ€å¤§åŒ–
- ç¶­è­·æˆæœ¬æœ€å°åŒ–
- æ“´å±•æ€§æœ€ä½³åŒ–

é€™å€‹æ¶æ§‹è¨­è¨ˆå°‡å¾¹åº•è§£æ±ºç›®å‰çš„æŠ€è¡“å‚µå‹™ï¼Œä¸¦ç‚ºæœªä¾†çš„åŠŸèƒ½æ“´å±•å¥ å®šå …å¯¦åŸºç¤ã€‚ 

---

## ğŸš€ **å¾ŒçºŒé–‹ç™¼éšæ®µè¦åŠƒ**

### **Phase 1: æ¨¡çµ„åŒ–é‡æ§‹ (3å¤©)**
```markdown
ç›®æ¨™: å°‡5000è¡Œç¨‹å¼ç¢¼æ‹†åˆ†ç‚º<1000è¡Œæ¨¡çµ„

ğŸ“ æ¨¡çµ„çµæ§‹è¨­è¨ˆ:
â”œâ”€â”€ ğŸ¯ æ ¸å¿ƒæ¨¡çµ„ (core/)
â”‚   â”œâ”€â”€ auth-manager.js        // LINEèªè­‰ç®¡ç† (<800è¡Œ)
â”‚   â”œâ”€â”€ data-manager.js        // è³‡æ–™è¼‰å…¥å„²å­˜ (<900è¡Œ)
â”‚   â”œâ”€â”€ api-client.js          // APIå‘¼å«å°è£ (<600è¡Œ)
â”‚   â””â”€â”€ config-manager.js      // è¨­å®šç®¡ç† (<400è¡Œ)
â”œâ”€â”€ âœï¸ ç·¨è¼¯å™¨æ¨¡çµ„ (editor/)
â”‚   â”œâ”€â”€ form-manager.js        // è¡¨å–®ç·¨è¼¯é‚è¼¯ (<1000è¡Œ)
â”‚   â”œâ”€â”€ image-manager.js       // åœ–ç‰‡è™•ç† (<800è¡Œ)
â”‚   â”œâ”€â”€ preview-manager.js     // å³æ™‚é è¦½ (<700è¡Œ)
â”‚   â””â”€â”€ validation-manager.js  // è¡¨å–®é©—è­‰ (<500è¡Œ)
â”œâ”€â”€ ğŸ“¤ åˆ†äº«æ¨¡çµ„ (share/)
â”‚   â”œâ”€â”€ line-share.js          // LINEåˆ†äº« (<600è¡Œ)
â”‚   â”œâ”€â”€ social-share.js        // ç¤¾äº¤åª’é«”åˆ†äº« (<800è¡Œ)
â”‚   â”œâ”€â”€ og-generator.js        // OGé é¢ç”Ÿæˆ (<500è¡Œ)
â”‚   â””â”€â”€ encoding-utils.js      // ç·¨ç¢¼å·¥å…· (<300è¡Œ)
â””â”€â”€ ğŸ¨ UIæ¨¡çµ„ (ui/)
    â”œâ”€â”€ card-renderer.js       // å¡ç‰‡æ¸²æŸ“ (<800è¡Œ)
    â”œâ”€â”€ drag-manager.js        // æ‹–æ‹‰æ’åº (<600è¡Œ)
    â”œâ”€â”€ mobile-ui.js           // æ‰‹æ©Ÿç‰ˆUI (<700è¡Œ)
    â””â”€â”€ animation-manager.js   // å‹•ç•«æ•ˆæœ (<400è¡Œ)

é‡æ§‹æ•ˆç›Š:
- ç¨‹å¼ç¢¼ç¶­è­·æ€§ â†‘ 300%
- é™¤éŒ¯æ•ˆç‡ â†‘ 200%
- åœ˜éšŠå”ä½œæ•ˆç‡ â†‘ 150%
- ç¨‹å¼ç¢¼é‡è¤‡ç‡ â†“ 70%
```

### **Phase 2: ä¸€é å¼é›»å­å ±ç·¨è¼¯å™¨ (2å¤©)**
```markdown
ç›®æ¨™: å»ºç«‹çµ±ä¸€ç·¨è¼¯ä»‹é¢ï¼Œæ”¯æ´æ‰€æœ‰åˆ†äº«å¹³å°

ğŸ¨ ç·¨è¼¯å™¨ä»‹é¢è¨­è¨ˆ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ä¸€é å¼é›»å­å ±ç·¨è¼¯å™¨ (Universal Newsletter Editor)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ ä¸»å…§å®¹å€åŸŸ (Master Content)                      â”‚
â”‚  â”œâ”€â”€ ğŸ“ æ¨™é¡Œç·¨è¼¯ (å³æ™‚é è¦½)                          â”‚
â”‚  â”œâ”€â”€ ğŸ“ å‰¯æ¨™é¡Œç·¨è¼¯ (é¡è‰²ã€å­—å‹èª¿æ•´)                  â”‚
â”‚  â”œâ”€â”€ ğŸ–¼ï¸ ä¸»åœ–ç‰‡ä¸Šå‚³ (æ‹–æ‹‰ä¸Šå‚³ã€å³æ™‚è£åˆ‡)               â”‚
â”‚  â”œâ”€â”€ ğŸ¨ é¡è‰²ä¸»é¡Œè¨­å®š (é è¨­æ¨¡æ¿ã€è‡ªè¨‚é…è‰²)             â”‚
â”‚  â””â”€â”€ ğŸ‘¤ æœƒå“¡è³‡è¨Šå€å¡Š (LINEå€‹äººè³‡æ–™æ•´åˆ)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ é™„åŠ å¡ç‰‡ç®¡ç† (Slave Cards)                       â”‚
â”‚  â”œâ”€â”€ ğŸª å®£å‚³å¡ç‰‡é¸æ“‡ (å¤šé¸ã€é è¦½)                    â”‚
â”‚  â”œâ”€â”€ ğŸ‰ æ´»å‹•å¡ç‰‡æ’å…¥ (æ™‚é–“é™åˆ¶ã€è‡ªå‹•å¤±æ•ˆ)            â”‚
â”‚  â”œâ”€â”€ ğŸ“‹ å¡ç‰‡æ’åºæ‹–æ‹‰ (è¦–è¦ºåŒ–æ‹–æ‹‰ã€å³æ™‚æ›´æ–°)          â”‚
â”‚  â””â”€â”€ ğŸ‘ï¸ å¡ç‰‡é è¦½ (æ‰‹æ©Ÿç‰ˆã€æ¡Œé¢ç‰ˆé è¦½)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”„ å³æ™‚é è¦½ (Live Preview)                          â”‚
â”‚  â”œâ”€â”€ ğŸ“± æ‰‹æ©Ÿç‰ˆé è¦½ (iPhone/Android)                  â”‚
â”‚  â”œâ”€â”€ ğŸ’» æ¡Œé¢ç‰ˆé è¦½ (LINE PCç‰ˆ)                       â”‚
â”‚  â”œâ”€â”€ ğŸ“¤ åˆ†äº«æ ¼å¼é è¦½ (å„å¹³å°æ ¼å¼)                    â”‚
â”‚  â””â”€â”€ ğŸ” OGé€£çµé è¦½ (FB/IG/Emailé¡¯ç¤ºæ•ˆæœ)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œ:
class UniversalNewsletterEditor {
  constructor() {
    this.masterContent = new MasterContentManager();
    this.slaveCards = new SlaveCardsManager();
    this.livePreview = new LivePreviewManager();
    this.autoSave = new AutoSaveManager();
  }
  
  // ä¸»å¾æ¶æ§‹æ•´åˆ
  integrateContent() {
    const finalContent = {
      master: this.masterContent.getData(),
      slaves: this.slaveCards.getOrderedCards(),
      metadata: {
        created: new Date(),
        platform: 'universal-editor',
        version: '1.0.0'
      }
    };
    return finalContent;
  }
}
```

### **Phase 3: çµ±ä¸€åˆ†äº«ç³»çµ± (2å¤©)**
```markdown
ç›®æ¨™: è§£æ±ºåˆ†äº«åŠŸèƒ½å•é¡Œï¼Œå»ºç«‹çµ±ä¸€åˆ†äº«ä»‹é¢

ğŸ”§ åˆ†äº«ç³»çµ±æ¶æ§‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¤ çµ±ä¸€åˆ†äº«ç³»çµ± (Universal Share System)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ åˆ†äº«æ–¹å¼åˆ†é¡                                     â”‚
â”‚  â”œâ”€â”€ ğŸŸ¢ LINEåˆ†äº« (ç›´æ¥åˆ†äº«)                          â”‚
â”‚  â”‚   â”œâ”€â”€ Flex Messageç”Ÿæˆ                           â”‚
â”‚  â”‚   â”œâ”€â”€ LIFFåˆ†äº«ä»‹é¢                               â”‚
â”‚  â”‚   â””â”€â”€ Carouselçµ„åˆ                               â”‚
â”‚  â”œâ”€â”€ ğŸ”— OGé€£çµåˆ†äº« (é€£çµ+æˆªåœ–)                       â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“˜ Facebookåˆ†äº«                            â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“· Instagramåˆ†äº«                           â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“§ Emailåˆ†äº«                               â”‚
â”‚  â”‚   â””â”€â”€ ğŸ’¬ å…¶ä»–ç¤¾äº¤å¹³å°                            â”‚
â”‚  â””â”€â”€ ğŸ–¼ï¸ åœ–ç‰‡åˆ†äº« (ç´”åœ–ç‰‡)                           â”‚
â”‚       â”œâ”€â”€ æˆªåœ–ç”Ÿæˆ                                   â”‚
â”‚       â”œâ”€â”€ æµ®æ°´å°æ·»åŠ                                  â”‚
â”‚       â””â”€â”€ æ ¼å¼å„ªåŒ–                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç·¨ç¢¼å•é¡Œè§£æ±º:
// èˆŠç‰ˆæœ¬ (æœ‰å•é¡Œ)
const encoded = btoa(JSON.stringify(data)); // âŒ ä¸­æ–‡ç·¨ç¢¼å¤±æ•—

// æ–°ç‰ˆæœ¬ (UTF-8å®‰å…¨)
function safeEncode(data) {
  const jsonString = JSON.stringify(data);
  const utf8Bytes = unescape(encodeURIComponent(jsonString));
  return btoa(utf8Bytes); // âœ… æ”¯æ´ä¸­æ–‡
}

function safeDecode(encoded) {
  const utf8Bytes = atob(encoded);
  const jsonString = decodeURIComponent(escape(utf8Bytes));
  return JSON.parse(jsonString); // âœ… æ­£ç¢ºè§£æä¸­æ–‡
}
```

### **Phase 4: æ¸¬è©¦èˆ‡éƒ¨ç½² (1å¤©)**
```markdown
ç›®æ¨™: å…¨é¢æ¸¬è©¦å’Œæ­£å¼ä¸Šç·š

ğŸ§ª æ¸¬è©¦è¨ˆåŠƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” å…¨é¢æ¸¬è©¦è¨ˆåŠƒ                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… åŠŸèƒ½æ¸¬è©¦                                         â”‚
â”‚  â”œâ”€â”€ ç·¨è¼¯åŠŸèƒ½æ¸¬è©¦ (æ–‡å­—ã€åœ–ç‰‡ã€æ’åº)                  â”‚
â”‚  â”œâ”€â”€ åˆ†äº«åŠŸèƒ½æ¸¬è©¦ (LINEã€FBã€IGã€Email)              â”‚
â”‚  â”œâ”€â”€ å„²å­˜åŠŸèƒ½æ¸¬è©¦ (è‡ªå‹•å„²å­˜ã€æ‰‹å‹•å„²å­˜)                â”‚
â”‚  â””â”€â”€ æ¬Šé™æ¸¬è©¦ (LINEç™»å…¥ã€è³‡æ–™å­˜å–)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš¡ æ•ˆèƒ½æ¸¬è©¦                                         â”‚
â”‚  â”œâ”€â”€ è¼‰å…¥é€Ÿåº¦æ¸¬è©¦ (ç›®æ¨™: <1ç§’)                       â”‚
â”‚  â”œâ”€â”€ æ“ä½œéŸ¿æ‡‰æ¸¬è©¦ (ç›®æ¨™: <0.2ç§’)                     â”‚
â”‚  â”œâ”€â”€ è¨˜æ†¶é«”ä½¿ç”¨æ¸¬è©¦ (ç›®æ¨™: <50MB)                    â”‚
â”‚  â””â”€â”€ ç¶²è·¯å„ªåŒ–æ¸¬è©¦ (åœ–ç‰‡å£“ç¸®ã€APIå„ªåŒ–)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ ç›¸å®¹æ€§æ¸¬è©¦                                        â”‚
â”‚  â”œâ”€â”€ ç€è¦½å™¨ç›¸å®¹ (Chromeã€Firefoxã€Safari)            â”‚
â”‚  â”œâ”€â”€ è¨­å‚™ç›¸å®¹ (iPhoneã€Androidã€æ¡Œé¢)                â”‚
â”‚  â”œâ”€â”€ è¢å¹•å°ºå¯¸é©é… (å„ç¨®è§£æåº¦)                       â”‚
â”‚  â””â”€â”€ LINEç’°å¢ƒæ¸¬è©¦ (LINEç€è¦½å™¨ã€å¤–éƒ¨ç€è¦½å™¨)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”„ ç©©å®šæ€§æ¸¬è©¦                                        â”‚
â”‚  â”œâ”€â”€ é•·æ™‚é–“æ“ä½œæ¸¬è©¦ (2å°æ™‚é€£çºŒä½¿ç”¨)                  â”‚
â”‚  â”œâ”€â”€ å¤šç”¨æˆ¶ä¸¦ç™¼æ¸¬è©¦ (100ç”¨æˆ¶åŒæ™‚ä½¿ç”¨)                â”‚
â”‚  â”œâ”€â”€ éŒ¯èª¤æ¢å¾©æ¸¬è©¦ (ç¶²è·¯æ–·ç·šã€ä¼ºæœå™¨éŒ¯èª¤)              â”‚
â”‚  â””â”€â”€ é‚Šç•Œæƒ…æ³æ¸¬è©¦ (æ¥µå¤§æª”æ¡ˆã€ç‰¹æ®Šå­—ç¬¦)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸš€ éƒ¨ç½²ç­–ç•¥:
1. è—ç¶ éƒ¨ç½² (Blue-Green Deployment)
2. æ¼¸é€²å¼æ¨å‡º (Progressive Rollout)
3. ç›£æ§å‘Šè­¦ (Real-time Monitoring)
4. å¿«é€Ÿå›æ»¾ (Instant Rollback)
```

---

## ğŸ“Š **æ•´é«”é–‹ç™¼æ™‚ç¨‹è¡¨**

```mermaid
gantt
    title å¤šé é¢æ¶æ§‹é–‹ç™¼æ™‚ç¨‹
    dateFormat  YYYY-MM-DD
    section æº–å‚™éšæ®µ
    MTESTæ’åºä¿®æ­£       :done,    prep1, 2025-07-12, 1d
    æ­£å¼ç‰ˆé·ç§»          :done,    prep2, 2025-07-12, 1d
    ç‰ˆæœ¬æˆªé»å»ºç«‹        :done,    prep3, 2025-07-12, 1d
    section Phase 1
    æ¨¡çµ„åŒ–é‡æ§‹          :active,  phase1, 2025-07-13, 3d
    æ ¸å¿ƒæ¨¡çµ„é–‹ç™¼        :         p1-1, 2025-07-13, 1d
    ç·¨è¼¯å™¨æ¨¡çµ„é–‹ç™¼      :         p1-2, 2025-07-14, 1d
    åˆ†äº«æ¨¡çµ„é–‹ç™¼        :         p1-3, 2025-07-15, 1d
    section Phase 2
    ä¸€é å¼ç·¨è¼¯å™¨        :         phase2, 2025-07-16, 2d
    ä¸»å¾æ¶æ§‹å¯¦ä½œ        :         p2-1, 2025-07-16, 1d
    å³æ™‚é è¦½ç³»çµ±        :         p2-2, 2025-07-17, 1d
    section Phase 3
    çµ±ä¸€åˆ†äº«ç³»çµ±        :         phase3, 2025-07-18, 2d
    ç·¨ç¢¼å•é¡Œä¿®æ­£        :         p3-1, 2025-07-18, 1d
    OGé€£çµç³»çµ±          :         p3-2, 2025-07-19, 1d
    section Phase 4
    æ¸¬è©¦èˆ‡éƒ¨ç½²          :         phase4, 2025-07-20, 1d
    å…¨é¢æ¸¬è©¦            :         p4-1, 2025-07-20, 0.5d
    æ­£å¼éƒ¨ç½²            :         p4-2, 2025-07-20, 0.5d
```

## ğŸ¯ **æˆåŠŸæŒ‡æ¨™èˆ‡é©—æ”¶æ¨™æº–**

### **æŠ€è¡“æŒ‡æ¨™**
- âœ… ç¨‹å¼ç¢¼æ¨¡çµ„åŒ–ï¼šæ¯å€‹æ¨¡çµ„ < 1000è¡Œ
- âœ… è¼‰å…¥æ•ˆèƒ½ï¼šé¦–æ¬¡è¼‰å…¥ < 1ç§’
- âœ… æ“ä½œéŸ¿æ‡‰ï¼šç”¨æˆ¶æ“ä½œ < 0.2ç§’
- âœ… è¨˜æ†¶é«”ä½¿ç”¨ï¼šå³°å€¼ < 50MB
- âœ… ç¨‹å¼ç¢¼é‡è¤‡ç‡ï¼š< 15%

### **åŠŸèƒ½æŒ‡æ¨™**
- âœ… æ’åºæº–ç¢ºæ€§ï¼š100% æ­£ç¢º
- âœ… åˆ†äº«æˆåŠŸç‡ï¼š> 98%
- âœ… ç·¨ç¢¼ç›¸å®¹æ€§ï¼š100% ä¸­æ–‡æ”¯æ´
- âœ… å¹³å°ç›¸å®¹æ€§ï¼šæ”¯æ´æ‰€æœ‰ä¸»æµå¹³å°
- âœ… éŒ¯èª¤è™•ç†ï¼šå„ªé›…éŒ¯èª¤æ¢å¾©

### **ç”¨æˆ¶é«”é©—æŒ‡æ¨™**
- âœ… ç”¨æˆ¶æ»¿æ„åº¦ï¼š> 95%
- âœ… æ“ä½œç›´è§€æ€§ï¼šæ–°ç”¨æˆ¶ < 3åˆ†é˜ä¸Šæ‰‹
- âœ… ç©©å®šæ€§ï¼šéŒ¯èª¤ç‡ < 0.5%
- âœ… å¯ç”¨æ€§ï¼š99.5% æ­£å¸¸é‹è¡Œæ™‚é–“

é€™å€‹å®Œæ•´çš„é–‹ç™¼éšæ®µè¦åŠƒç¢ºä¿äº†ç³»çµ±çš„ç©©å®šæ€§ã€å¯ç¶­è­·æ€§å’Œç”¨æˆ¶é«”é©—çš„å…¨é¢æå‡ã€‚ 