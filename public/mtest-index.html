<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 快速編輯器系統 - MTEST</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/flex2html.css">
    <script src="js/flex2html.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5rem;
            color: #333;
            margin: 0;
        }
        .system-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .system-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        .quick-editor-system {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
        }
        .main-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        .btn-primary {
            background: rgba(255,255,255,0.95);
            color: #667eea;
            padding: 12px 24px;
            border-radius: 12px;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            transform: scale(1.05);
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }
        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        .share-platforms {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
        }
        .platform-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
            margin-top: 1rem;
        }
        .platform-btn {
            padding: 8px 12px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.2s ease;
        }
        .platform-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .preview-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .feature-explanation {
            background: #e8f4ff;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        .admin-section {
            background: #fff5f5;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #dc3545;
        }
        .admin-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        .admin-btn {
            background: #dc3545;
            color: white;
            padding: 10px 16px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        .admin-btn:hover {
            background: #c82333;
            transform: translateY(-2px);
        }
        @media (max-width: 768px) {
            .system-grid {
                grid-template-columns: 1fr;
            }
            .main-buttons {
                flex-direction: column;
                align-items: center;
            }
            .btn-primary, .btn-secondary {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>🚀 快速編輯器系統</h1>
            <p style="color: #666; font-size: 18px; margin: 10px 0;">MTEST 專用版本 - 多平台分享架構</p>
        </div>

        <!-- 🚀 全新快速編輯器系統 -->
        <div class="quick-editor-system">
            <h2 style="margin: 0 0 1rem 0; font-size: 1.5rem; font-weight: bold; text-align: center;">
                🚀 全新快速編輯器系統
            </h2>
            <p style="text-align: center; margin: 0 0 1.5rem 0; font-size: 14px; opacity: 0.9;">
                ⚡ 0.5秒載入 | 🎨 離線編輯 | 📱 多平台分享 | 🔐 安全授權
            </p>
            
            <!-- 功能說明 -->
            <div class="feature-explanation" style="background: rgba(255,255,255,0.1); color: white; margin-bottom: 1.5rem;">
                <h3 style="margin: 0 0 10px 0; font-size: 16px;">📋 功能說明</h3>
                <div style="font-size: 14px; line-height: 1.6;">
                    <p style="margin: 5px 0;"><strong>⚡ 立即編輯</strong>：直接進入會員卡編輯器，載入資料庫資料和預覽功能</p>
                    <p style="margin: 5px 0;"><strong>👤 LINE登入</strong>：首次使用時獲取LINE個人資料，建立個人化卡片</p>
                    <p style="margin: 5px 0;"><strong>🎯 建議流程</strong>：首次使用先「LINE登入」→ 後續直接「立即編輯」</p>
                </div>
            </div>
            
            <!-- 主要入口按鈕 -->
            <div class="main-buttons">
                <a href="/mcard-mtest.html" target="_blank" class="btn-primary">
                    ⚡ 立即編輯
                </a>
                <a href="#" onclick="loginLine(); return false;" class="btn-secondary">
                    👤 LINE登入
                </a>
            </div>
            
            <!-- 分享平台按鈕群 -->
            <div class="share-platforms">
                <h4 style="margin: 0 0 1rem 0; font-size: 14px; text-align: center; opacity: 0.9;">
                    📱 多平台分享系統
                </h4>
                <div class="platform-grid">
                    <a href="/line-auth-bridge.html" class="platform-btn" style="background: #00C300; color: white;">
                        📱 LINE授權
                    </a>
                    <a href="/share-email.html" class="platform-btn" style="background: #EA4335; color: white;">
                        📧 EMAIL分享
                    </a>
                    <a href="/share-facebook.html" class="platform-btn" style="background: #1877F2; color: white;">
                        📘 Facebook
                    </a>
                    <a href="/share-universal.html" class="platform-btn" style="background: #6C757D; color: white;">
                        🌐 其他平台
                    </a>
                </div>
            </div>
        </div>

        <div class="system-grid">
            <!-- 即時預覽區 -->
            <div class="system-card">
                <h2 style="margin: 0 0 20px 0; color: #333;">👀 即時預覽 - M01001會員卡</h2>
                <div id="flex2html" style="max-width: 400px; margin: 0 auto;"></div>
                <div style="text-align: center; margin-top: 15px; font-size: 14px; color: #666;">
                    <p>📋 這是資料庫中的 M01001 會員卡範例</p>
                    <p>🎨 點擊「立即編輯」可進行客製化編輯</p>
                </div>
            </div>

            <!-- 原始編輯器工具 -->
            <div class="system-card">
                <h2 style="margin: 0 0 20px 0; color: #333;">🔧 Flex Message 開發工具</h2>
                <div style="margin-bottom: 16px;">
                    <a href="/member-card-simtest.html" style="display: inline-block; padding: 8px 16px; background: #06C755; color: white; border-radius: 6px; text-decoration: none; font-size: 14px;">
                        📋 Flex碼測試預覽頁
                    </a>
                </div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 20px;">
                    <button onclick="addComponent('box')" style="padding: 8px 12px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">新增 Box</button>
                    <button onclick="addComponent('text')" style="padding: 8px 12px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">新增文字</button>
                    <button onclick="addComponent('image')" style="padding: 8px 12px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">新增圖片</button>
                    <button onclick="addComponent('button')" style="padding: 8px 12px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">新增按鈕</button>
                </div>
                <div id="editor" style="border: 1px solid #ddd; padding: 10px; border-radius: 4px; min-height: 150px; background: #f9f9f9;"></div>
            </div>
        </div>

        <!-- 🔴 管理後台區塊 -->
        <div class="admin-section">
            <h3 style="margin: 0 0 10px 0; color: #dc3545; font-size: 18px;">🔴 系統管理後台</h3>
            <p style="margin: 0 0 15px 0; font-size: 14px; color: #666;">
                ⚠️ 管理功能：點數回饋比例設定、交易記錄查詢、會員卡片管理
            </p>
            <div class="admin-buttons">
                <a href="/admin-points.html" class="admin-btn">💰 點數設定管理</a>
                <a href="/points-history.html" class="admin-btn">📊 點數交易記錄</a>
                <a href="/mcard-mtest.html" class="admin-btn">🎫 會員卡編輯器</a>
            </div>
        </div>
    </div>

    <script src="js/editor.js"></script>
    <script>
        // M01001 會員卡 JSON 資料
        const m01001CardData = {
            "type": "flex",
            "altText": "我在呈璽/呈璽",
            "contents": {
                "type": "bubble",
                "size": "mega",
                "body": {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                        {
                            "type": "image",
                            "size": "full",
                            "aspectRatio": "1:1",
                            "aspectMode": "cover",
                            "url": "https://barv3.vercel.app/uploads/vip/TS-B1.png"
                        },
                        {
                            "type": "image",
                            "url": "https://barv3.vercel.app/uploads/vip/APNG1.png",
                            "size": "full",
                            "aspectRatio": "1:1",
                            "animated": true,
                            "aspectMode": "cover",
                            "position": "absolute",
                            "action": {
                                "type": "uri",
                                "label": "action",
                                "uri": "https://secure.smore.com/n/td1qc"
                            }
                        },
                        {
                            "type": "box",
                            "width": "90px",
                            "layout": "horizontal",
                            "spacing": "none",
                            "contents": [
                                {
                                    "type": "box",
                                    "action": {
                                        "uri": "https://lihi3.cc/ZWV2u",
                                        "type": "uri",
                                        "label": "VIP會員號碼"
                                    },
                                    "layout": "vertical",
                                    "contents": [
                                        {
                                            "url": "https://barv3.vercel.app/uploads/vip/icon_calendar.png",
                                            "type": "image",
                                            "action": {
                                                "uri": "https://lihi3.cc/ZWV2u",
                                                "type": "uri",
                                                "label": "action"
                                            },
                                            "size": "35px"
                                        },
                                        {
                                            "type": "text",
                                            "text": "TSAMC",
                                            "size": "10px",
                                            "align": "center",
                                            "gravity": "center",
                                            "offsetTop": "30px",
                                            "position": "absolute",
                                            "offsetStart": "12px",
                                            "color": "#FFFFFF"
                                        }
                                    ],
                                    "cornerRadius": "30px",
                                    "backgroundColor": "#A4924A"
                                },
                                {
                                    "type": "box",
                                    "action": {
                                        "uri": "https://lihi.cc/jl7Pw",
                                        "type": "uri",
                                        "label": "愛心會員號碼"
                                    },
                                    "layout": "vertical",
                                    "contents": [
                                        {
                                            "url": "https://barv3.vercel.app/uploads/vip/loveicon.png",
                                            "type": "image",
                                            "action": {
                                                "uri": "https://lihi.cc/jl7Pw",
                                                "type": "uri",
                                                "label": "action"
                                            },
                                            "size": "32px"
                                        },
                                        {
                                            "type": "text",
                                            "size": "10px",
                                            "align": "center",
                                            "gravity": "center",
                                            "position": "absolute",
                                            "offsetTop": "30px",
                                            "offsetStart": "12px",
                                            "text": "0000",
                                            "color": "#FFFFFF"
                                        }
                                    ],
                                    "cornerRadius": "30px",
                                    "backgroundColor": "#d00308"
                                }
                            ],
                            "offsetTop": "250px",
                            "offsetStart": "10px",
                            "height": "45px",
                            "position": "absolute"
                        },
                        {
                            "size": "20px",
                            "text": "我在呈璽",
                            "type": "text",
                            "align": "center",
                            "color": "#000000",
                            "weight": "bold",
                            "margin": "md"
                        },
                        {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [
                                {
                                    "type": "text",
                                    "text": "我在呈璽，欣賞美好幸福！我在呈璽，喝茶喝咖啡很悠閒！！我不在呈璽，就是在前往呈璽的路上！！！",
                                    "wrap": true,
                                    "size": "16px",
                                    "margin": "sm",
                                    "color": "#000000"
                                }
                            ],
                            "paddingEnd": "65px",
                            "paddingStart": "5px",
                            "height": "95px"
                        },
                        {
                            "type": "box",
                            "width": "65px",
                            "layout": "vertical",
                            "spacing": "none",
                            "contents": [
                                {
                                    "type": "box",
                                    "action": {
                                        "uri": "https://secure.smore.com/n/td1qc",
                                        "type": "uri",
                                        "label": "action"
                                    },
                                    "layout": "vertical",
                                    "contents": [
                                        {
                                            "url": "https://barv3.vercel.app/uploads/vip/TS-LOGO.png",
                                            "type": "image",
                                            "action": {
                                                "uri": "https://secure.smore.com/n/td1qc",
                                                "type": "uri",
                                                "label": "官網"
                                            },
                                            "aspectRatio": "1:1",
                                            "aspectMode": "cover",
                                            "backgroundColor": "#E1E6E0"
                                        }
                                    ],
                                    "cornerRadius": "35px",
                                    "borderWidth": "semi-bold",
                                    "borderColor": "#a4924c"
                                },
                                {
                                    "type": "box",
                                    "layout": "horizontal",
                                    "contents": [
                                        {
                                            "type": "text",
                                            "size": "14px",
                                            "text": "呈璽",
                                            "style": "italic",
                                            "color": "#a4924c",
                                            "align": "center",
                                            "weight": "bold",
                                            "wrap": true,
                                            "margin": "none"
                                        }
                                    ],
                                    "paddingAll": "none",
                                    "cornerRadius": "none",
                                    "margin": "none",
                                    "spacing": "none"
                                }
                            ],
                            "position": "absolute",
                            "offsetEnd": "5px",
                            "margin": "md",
                            "offsetTop": "315px"
                        },
                        {
                            "type": "box",
                            "layout": "horizontal",
                            "contents": [
                                {
                                    "type": "button",
                                    "action": {
                                        "type": "uri",
                                        "label": "加呈璽好友",
                                        "uri": "https://lin.ee/JLLIBlP"
                                    },
                                    "color": "#a4924a",
                                    "style": "primary",
                                    "height": "sm",
                                    "offsetEnd": "1px"
                                },
                                {
                                    "type": "button",
                                    "action": {
                                        "type": "uri",
                                        "label": "分享給好友",
                                        "uri": "https://liff.line.me/2007327814-BdWpj70m?pageId=M01001"
                                    },
                                    "color": "#a4924b",
                                    "style": "primary",
                                    "height": "sm",
                                    "offsetStart": "1px"
                                }
                            ],
                            "margin": "md"
                        }
                    ],
                    "backgroundColor": "#E1E6E0",
                    "paddingAll": "10px"
                },
                "footer": {
                    "type": "box",
                    "layout": "horizontal",
                    "spacing": "none",
                    "contents": [
                        {
                            "type": "text",
                            "text": "呈璽元宇宙3D展覽館",
                            "wrap": true,
                            "color": "#00000050",
                            "align": "center",
                            "action": {
                                "type": "uri",
                                "label": "action",
                                "uri": "https://lihi3.cc/LY5qf"
                            },
                            "size": "sm",
                            "margin": "none"
                        }
                    ],
                    "backgroundColor": "#E1E6E0",
                    "height": "30px",
                    "margin": "none",
                    "paddingAll": "2px"
                },
                "styles": {
                    "footer": {
                        "separatorColor": "#000000",
                        "separator": true
                    }
                }
            }
        };

        // 頁面載入時顯示 M01001 會員卡
        window.onload = function() {
            flex2html('flex2html', m01001CardData);
        };
        
        // 快速編輯器相關函數
        function loginLine() {
            const authUrl = '/line-auth-bridge.html?returnUrl=' + encodeURIComponent('/mcard-mtest.html');
            window.open(authUrl, '_blank');
        }

        // 編輯器功能 (基本版)
        function addComponent(type) {
            const editor = document.getElementById('editor');
            const component = document.createElement('div');
            component.style.padding = '10px';
            component.style.margin = '5px';
            component.style.border = '1px solid #ccc';
            component.style.borderRadius = '4px';
            component.style.backgroundColor = '#fff';
            
            switch(type) {
                case 'box':
                    component.innerHTML = '📦 Box 元件';
                    break;
                case 'text':
                    component.innerHTML = '📝 Text 元件';
                    break;
                case 'image':
                    component.innerHTML = '🖼️ Image 元件';
                    break;
                case 'button':
                    component.innerHTML = '🔘 Button 元件';
                    break;
            }
            
            editor.appendChild(component);
        }

        function saveCard() {
            alert('💾 儲存功能：請使用「立即編輯」進入完整編輯器');
        }

        function previewCard() {
            alert('👀 預覽功能：請使用「立即編輯」進入完整編輯器');
        }
    </script>
</body>
</html> 